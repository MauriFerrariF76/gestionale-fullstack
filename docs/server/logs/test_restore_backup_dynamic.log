[Tue Jul 29 02:48:48 PM CEST 2025] Inizio test restore dinamico backup database
[Tue Jul 29 02:48:48 PM CEST 2025] Backup da testare: /mnt/backup_gestionale/database/gestionale_db_20250729_140202.backup
[Tue Jul 29 02:48:48 PM CEST 2025] Creazione database temporaneo gestionale_test_restore...
[Tue Jul 29 02:48:48 PM CEST 2025] Configurazione permessi utente...
GRANT
GRANT
GRANT
GRANT
ALTER DEFAULT PRIVILEGES
ALTER DEFAULT PRIVILEGES
[Tue Jul 29 02:48:49 PM CEST 2025] Esecuzione restore nel database temporaneo...
pg_restore: connecting to database for restore
pg_restore: creating FUNCTION "public.update_updated_at_column()"
pg_restore: creating TABLE "public.audit_logs"
pg_restore: creating TABLE "public.clienti"
pg_restore: creating TABLE "public.refresh_tokens"
pg_restore: creating TABLE "public.users"
pg_restore: processing data for table "public.audit_logs"
pg_restore: processing data for table "public.clienti"
pg_restore: processing data for table "public.refresh_tokens"
pg_restore: processing data for table "public.users"
pg_restore: creating CONSTRAINT "public.audit_logs audit_logs_pkey"
pg_restore: creating CONSTRAINT "public.clienti clienti_pkey"
pg_restore: creating CONSTRAINT "public.refresh_tokens refresh_tokens_pkey"
pg_restore: creating CONSTRAINT "public.users users_email_key"
pg_restore: creating CONSTRAINT "public.users users_pkey"
pg_restore: creating FK CONSTRAINT "public.audit_logs audit_logs_user_id_fkey"
pg_restore: creating FK CONSTRAINT "public.refresh_tokens refresh_tokens_user_id_fkey"
[Tue Jul 29 02:48:58 PM CEST 2025] Test connessione e query base...
 table_count 
-------------
           4
(1 row)

[Tue Jul 29 02:49:03 PM CEST 2025] Test dinamico su tutte le tabelle...
ERROR:  column "tablename" does not exist
LINE 9:         tablename,
                ^
HINT:  Perhaps you meant to reference the column "t.table_name".
[Tue Jul 29 02:49:07 PM CEST 2025] Test funzioni e stored procedures...
       routine_name       | routine_type | data_type 
--------------------------+--------------+-----------
 update_updated_at_column | FUNCTION     | trigger
(1 row)

[Tue Jul 29 02:49:11 PM CEST 2025] Test triggers...
 trigger_name | event_manipulation | event_object_table 
--------------+--------------------+--------------------
(0 rows)

[Tue Jul 29 02:49:14 PM CEST 2025] Pulizia database temporaneo...
[Tue Jul 29 02:49:14 PM CEST 2025] Test restore dinamico completato con successo!
[Tue Jul 29 02:49:30 PM CEST 2025] Inizio test restore dinamico backup database
[Tue Jul 29 02:49:30 PM CEST 2025] Backup da testare: /mnt/backup_gestionale/database/gestionale_db_20250729_140202.backup
[Tue Jul 29 02:49:30 PM CEST 2025] Creazione database temporaneo gestionale_test_restore...
[Tue Jul 29 02:49:30 PM CEST 2025] Configurazione permessi utente...
GRANT
GRANT
GRANT
GRANT
ALTER DEFAULT PRIVILEGES
ALTER DEFAULT PRIVILEGES
[Tue Jul 29 02:49:30 PM CEST 2025] Esecuzione restore nel database temporaneo...
pg_restore: connecting to database for restore
pg_restore: creating FUNCTION "public.update_updated_at_column()"
pg_restore: creating TABLE "public.audit_logs"
pg_restore: creating TABLE "public.clienti"
pg_restore: creating TABLE "public.refresh_tokens"
pg_restore: creating TABLE "public.users"
pg_restore: processing data for table "public.audit_logs"
pg_restore: processing data for table "public.clienti"
pg_restore: processing data for table "public.refresh_tokens"
pg_restore: processing data for table "public.users"
pg_restore: creating CONSTRAINT "public.audit_logs audit_logs_pkey"
pg_restore: creating CONSTRAINT "public.clienti clienti_pkey"
pg_restore: creating CONSTRAINT "public.refresh_tokens refresh_tokens_pkey"
pg_restore: creating CONSTRAINT "public.users users_email_key"
pg_restore: creating CONSTRAINT "public.users users_pkey"
pg_restore: creating FK CONSTRAINT "public.audit_logs audit_logs_user_id_fkey"
pg_restore: creating FK CONSTRAINT "public.refresh_tokens refresh_tokens_user_id_fkey"
[Tue Jul 29 02:49:46 PM CEST 2025] Test connessione e query base...
 table_count 
-------------
           4
(1 row)

[Tue Jul 29 02:49:49 PM CEST 2025] Test dinamico su tutte le tabelle...
   table_name   | record_count 
----------------+--------------
 audit_logs     |           49
 clienti        |           10
 refresh_tokens |           28
 users          |            1
(4 rows)

[Tue Jul 29 02:49:52 PM CEST 2025] Test funzioni e stored procedures...
