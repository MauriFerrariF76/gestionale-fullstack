"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{381:(e,t,a)=>{a.d(t,{A:()=>l});let l=(0,a(9946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1130:(e,t,a)=>{a.d(t,{A:()=>c});var l=a(5155);a(2115);var s=a(5695),r=a(6874),n=a.n(r),i=a(6766);let o=e=>{let{className:t=""}=e,a=(0,s.usePathname)(),r=[{href:"/",label:"Dashboard",icon:(0,l.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,l.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"9"}),(0,l.jsx)("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]})},{href:"/commesse",label:"Commesse",icon:(0,l.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{d:"M9 12l2 2 4-4"}),(0,l.jsx)("path",{d:"M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"})]})},{href:"/dipendenti",label:"Dipendenti",icon:(0,l.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,l.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})},{href:"/clienti",label:"Clienti",icon:(0,l.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,l.jsx)("circle",{cx:"9",cy:"7",r:"4"})]})},{href:"/fornitori",label:"Fornitori",icon:(0,l.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,l.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,l.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,l.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},{href:"/documenti",label:"Documenti",icon:(0,l.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,l.jsx)("polyline",{points:"14,2 14,8 20,8"}),(0,l.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,l.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),(0,l.jsx)("polyline",{points:"10,9 9,9 8,9"})]})},{href:"/impostazioni",label:"Impostazioni",icon:(0,l.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,l.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}],o=e=>"/"===e?"/"===a:a.startsWith(e),c=e=>{let{item:t}=e,a=o(t.href);return(0,l.jsxs)(n(),{href:t.href,className:"group cursor-pointer flex items-center space-x-3 p-3 rounded-md transition-all duration-200 ".concat(a?"bg-neutral-700/50 transform scale-[0.98]":"hover:bg-neutral-700/50 hover:transform hover:scale-[0.98] active:scale-[0.96]"),children:[(0,l.jsx)("div",{className:"".concat(a?"text-[#3B82F6]":"text-neutral-400"),children:t.icon}),(0,l.jsx)("span",{className:"text-sm font-medium ".concat(a?"text-[#3B82F6]":"text-neutral-300 group-hover:text-neutral-100"),children:t.label})]})};return(0,l.jsxs)("aside",{className:"w-64 bg-neutral-850 border-r border-neutral-600 flex flex-col ".concat(t),children:[(0,l.jsx)("div",{className:"p-6 border-b border-neutral-600",children:(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("div",{className:"w-12 h-8 flex items-center",children:(0,l.jsx)(i.default,{src:"/ferrari-pietro-logo.png",alt:"Ferrari Pietro Snc",width:48,height:32,className:"w-full h-full object-contain"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xs font-semibold text-neutral-200 leading-tight",children:"FERRARI PIETRO SNC"}),(0,l.jsx)("p",{className:"text-xs text-neutral-500 mt-0.5",children:"Gestionale"})]})]})}),(0,l.jsx)("nav",{className:"flex-1 p-4 space-y-1",children:r.map(e=>(0,l.jsx)(c,{item:e},e.href))}),(0,l.jsx)("div",{className:"p-4 border-t border-neutral-600",children:(0,l.jsxs)("div",{className:"text-xs text-neutral-500 text-center",children:["v1.0 â€¢ ",(0,l.jsx)("span",{className:"text-[#3B82F6]",children:"Sistema Online"})]})})]})},c=e=>{let{children:t,pageTitle:a,pageDescription:s,headerActions:r,className:n=""}=e;return(0,l.jsxs)("div",{className:"min-h-screen bg-neutral-800 text-neutral-100 flex ".concat(n),children:[(0,l.jsx)(o,{}),(0,l.jsxs)("main",{className:"flex-1 flex flex-col",children:[(0,l.jsxs)("header",{className:"bg-neutral-800 border-b border-neutral-600 px-8 py-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-neutral-50",children:a}),(0,l.jsx)("p",{className:"text-sm text-neutral-400",children:s})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[r,(0,l.jsx)("div",{className:"w-3 h-3 bg-[#3B82F6] rounded-full animate-pulse",title:"Sistema Online"})]})]}),(0,l.jsx)("div",{className:"flex-1 p-6 overflow-auto",children:t})]})]})}},2560:(e,t,a)=>{a.d(t,{K2:()=>c,WY:()=>n,cG:()=>i});var l=a(5155),s=a(2115);let r=(0,s.createContext)(void 0),n=e=>{let{children:t}=e,[a,n]=(0,s.useState)(new Map),[i,o]=(0,s.useState)(0),c=(0,s.useCallback)(()=>{o(e=>e+1)},[]),d=(0,s.useCallback)(e=>{n(t=>new Map(t.set(e.id,e)))},[]),x=(0,s.useCallback)(e=>a.get(e),[a]),u=(0,s.useCallback)(e=>{try{let t=localStorage.getItem("table_config_".concat(e));if(t){let a=JSON.parse(t);return{visibleColumns:a.visibleColumns||m(e).visibleColumns,sortConfig:a.sortConfig||null}}}catch(t){console.warn("Errore caricamento config per ".concat(e,":"),t)}return m(e)},[a]),m=(0,s.useCallback)(e=>{let t=a.get(e);return{visibleColumns:(null==t?void 0:t.defaultVisibleColumns)||[],sortConfig:null}},[a]),h=(0,s.useCallback)((e,t)=>{try{localStorage.setItem("table_config_".concat(e),JSON.stringify(t))}catch(t){console.warn("Errore salvataggio config per ".concat(e,":"),t)}},[]),f=(0,s.useCallback)(e=>u(e),[u]),b=(0,s.useCallback)((e,t)=>{let a={...u(e),...t};h(e,a),c()},[u,h,c]),p=(0,s.useCallback)(e=>{let t=m(e);h(e,t),localStorage.removeItem("table_config_".concat(e)),c()},[m,h,c]),v=(0,s.useCallback)((e,t)=>{let l=a.get(e),s=null==l?void 0:l.columns.find(e=>e.key===t);if((null==s?void 0:s.sortable)===!1)return;let r=u(e).sortConfig,n=null;(null==r?void 0:r.key)===t?"asc"===r.direction&&(n={key:t,direction:"desc"}):n={key:t,direction:"asc"},b(e,{sortConfig:n})},[a,u,b]),g=(0,s.useCallback)((e,t)=>{let a=u(e).sortConfig;return a?[...t].sort((e,t)=>{let l=e[a.key],s=t[a.key];return null==l?1:null==s?-1:l<s?"asc"===a.direction?-1:1:l>s?"asc"===a.direction?1:-1:0}):t},[u]),j=(0,s.useCallback)(e=>{let t=a.get(e),l=u(e);return t?l.visibleColumns.map(e=>{let a=t.columns.find(t=>t.key===e);return a||null}).filter(Boolean):[]},[a,u]),y=(0,s.useCallback)(()=>{let e={};a.forEach((t,a)=>{e[a]=u(a)});let t=new Blob([JSON.stringify({version:"1.0",timestamp:new Date().toISOString(),app:"Ferrari Pietro SNC - Gestionale",configs:e},null,2)],{type:"application/json"}),l=new Date,s="gestionale-".concat(l.getDate().toString().padStart(2,"0"),"-").concat((l.getMonth()+1).toString().padStart(2,"0"),"-").concat(l.getFullYear(),"-").concat(l.getHours().toString().padStart(2,"0"),"-").concat(l.getMinutes().toString().padStart(2,"0"),".json"),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=s,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)},[a,u]),N=(0,s.useCallback)(e=>{if(!e||"object"!=typeof e||null===e||!("configs"in e))return void console.error("Formato file non valido");try{let t=e.configs;Object.entries(t).forEach(e=>{let[t,l]=e;a.has(t)&&h(t,l)}),window.location.reload()}catch(e){console.error("Errore durante l'import:",e)}},[a,h]);return(0,l.jsx)(r.Provider,{value:{registerSchema:d,getSchema:x,getConfig:f,updateConfig:b,resetConfig:p,handleSort:v,sortData:g,exportConfig:y,importConfig:N,getVisibleColumnsWithConfig:j},children:t})},i=()=>{let e=(0,s.useContext)(r);if(void 0===e)throw Error("useTableConfig deve essere usato dentro TableConfigProvider");return e},o=()=>{let[e,t]=(0,s.useState)(!1);return s.useEffect(()=>{t(!0)},[]),e},c=e=>{let t=i(),a=o(),l=t.getConfig(e),s=t.getSchema(e);return{visibleColumns:l.visibleColumns,sortConfig:a?l.sortConfig:null,allColumns:(null==s?void 0:s.columns)||[],defaultColumns:(null==s?void 0:s.defaultVisibleColumns)||[],updateConfig:a=>t.updateConfig(e,a),resetConfig:()=>t.resetConfig(e),handleSort:a=>t.handleSort(e,a),sortData:a=>t.sortData(e,a),getVisibleColumnsWithConfig:()=>t.getVisibleColumnsWithConfig(e),isClient:a}}},4797:(e,t,a)=>{a.d(t,{ZY:()=>n});var l=a(5155);a(2115);let s={id:"clienti",columns:[{key:"IdCliente",label:"ID Cliente",width:120,sortable:!0,format:e=>(0,l.jsx)("span",{className:"font-medium text-neutral-100",children:e})},{key:"CodiceMT",label:"Codice MT",width:100,sortable:!0,format:e=>(0,l.jsx)("span",{className:"text-neutral-200",children:e})},{key:"RagioneSocialeC",label:"Ragione Sociale",width:200,sortable:!0,format:e=>(0,l.jsx)("span",{className:"text-neutral-200",children:e})},{key:"ReferenteC",label:"Referente",width:150,sortable:!0,format:e=>(0,l.jsx)("span",{className:"text-neutral-300 text-sm",children:e||"-"})},{key:"CITTAc",label:"Citt\xe0",width:120,sortable:!0,format:(e,t)=>(0,l.jsx)("span",{className:"text-neutral-300",children:e||"-"})},{key:"PROVc",label:"Provincia",width:80,sortable:!0,format:e=>(0,l.jsx)("span",{className:"text-neutral-300",children:e||"-"})},{key:"Telefono",label:"Telefono",width:120,sortable:!1,format:e=>(0,l.jsx)("span",{className:"text-neutral-300",children:e||"-"})},{key:"PartitaIva",label:"P.IVA",width:130,sortable:!0,format:e=>(0,l.jsx)("span",{className:"text-neutral-300 font-mono text-sm",children:e||"-"})},{key:"CodiceFiscale",label:"Codice Fiscale",width:140,sortable:!0,format:e=>(0,l.jsx)("span",{className:"text-neutral-300 font-mono text-sm",children:e||"-"})},{key:"CategoriaMerceologica",label:"Categoria",width:150,sortable:!0,format:e=>(0,l.jsx)("span",{className:"text-neutral-300 text-sm",children:e||"-"})},{key:"EffettivoPotenziale",label:"Status Commerciale",width:130,sortable:!0,format:e=>e?(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({Effettivo:"bg-green-400/20 text-green-400",Potenziale:"bg-amber-400/20 text-amber-400","Ex cliente":"bg-red-400/20 text-red-400"}[e]||"bg-neutral-400/20 text-neutral-400"),children:e}):(0,l.jsx)("span",{className:"text-neutral-500",children:"-"})},{key:"AttivoC",label:"Status",width:100,sortable:!0,format:e=>(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e?"bg-green-400/20 text-green-400":"bg-red-400/20 text-red-400"),children:e?"Attivo":"Non Attivo"})},{key:"AttivoDalC",label:"Attivo Dal",width:110,sortable:!0,format:e=>(0,l.jsx)("span",{className:"text-neutral-300 text-sm",children:e?new Date(e).toLocaleDateString("it-IT"):"-"})},{key:"CondizioniPagamentoC",label:"Condizioni Pagamento",width:150,sortable:!0,format:e=>(0,l.jsx)("span",{className:"text-neutral-300 text-sm",children:e||"-"})},{key:"BancaAppoggio",label:"Banca",width:140,sortable:!0,format:e=>(0,l.jsx)("span",{className:"text-neutral-300 text-sm",children:e||"-"})},{key:"EmailFatturazione",label:"Email Fatturazione",width:180,sortable:!1,format:e=>(0,l.jsx)("span",{className:"text-neutral-300 text-sm",children:e||"-"})}],defaultVisibleColumns:["IdCliente","RagioneSocialeC","CITTAc","Telefono","PartitaIva","EffettivoPotenziale","AttivoC"]},r={id:"fornitori",columns:[{key:"codice_fornitore",label:"Codice",width:120,sortable:!0,format:e=>(0,l.jsx)("div",{className:"font-medium text-neutral-100",children:e})},{key:"ragione_sociale",label:"Ragione Sociale",width:250,sortable:!0,format:(e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-neutral-200",children:e}),t.referente&&(0,l.jsx)("div",{className:"text-xs text-neutral-400",children:t.referente})]})},{key:"localita",label:"Localit\xe0",width:150,sortable:!0,format:(e,t)=>(0,l.jsx)("span",{className:"text-neutral-300",children:t.citta_principale?"".concat(t.citta_principale," (").concat(t.provincia_principale,")"):"-"})},{key:"telefono",label:"Telefono",width:120,sortable:!0,format:e=>(0,l.jsx)("span",{className:"text-neutral-300",children:e||"-"})},{key:"partita_iva",label:"P.IVA",width:130,sortable:!0,format:e=>(0,l.jsx)("span",{className:"text-neutral-300 font-mono text-sm",children:e||"-"})},{key:"tipo_fornitura",label:"Tipo Fornitura",width:150,sortable:!0,format:e=>(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>"Conto Terzisti/Outsourcing"===e?"bg-purple-400/20 text-purple-400":"Materia Prima"===e?"bg-blue-400/20 text-blue-400":"bg-green-400/20 text-green-400")(e)),children:(null==e?void 0:e.replace("Materiali di Consumo/Componenti","Materiali"))||"-"})},{key:"valutazione_complessiva",label:"Valutazione",width:120,sortable:!0,format:(e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"font-medium ".concat((e=>e>=.9?"text-green-400":e>=.8?"text-green-300":e>=.7?"text-yellow-400":e>=.6?"text-orange-400":"text-red-400")(e)),children:[(10*e).toFixed(1),"/10"]}),(0,l.jsxs)("div",{className:"text-xs text-neutral-400",children:["C:",t.certificazione," S:",t.storicita," R:",t.rispetto_consegne," ","Q:",t.qualita_fornitura]})]})},{key:"attivo",label:"Status",width:120,sortable:!0,format:(e,t)=>(0,l.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e?"bg-green-400/20 text-green-400":"bg-red-400/20 text-red-400"),children:e?"Attivo":"Non Attivo"}),t.selezionato&&(0,l.jsx)("span",{className:"px-2 py-1 bg-[#3B82F6]/20 text-[#3B82F6] rounded-full text-xs font-medium",children:"Selezionato"})]})},{key:"certificazione",label:"Certificazione",width:110,sortable:!0,format:e=>(0,l.jsxs)("span",{className:"text-neutral-300",children:[e,"/10"]})},{key:"storicita",label:"Storicit\xe0",width:100,sortable:!0,format:e=>(0,l.jsxs)("span",{className:"text-neutral-300",children:[e,"/10"]})},{key:"rispetto_consegne",label:"Rispetto Consegne",width:140,sortable:!0,format:e=>(0,l.jsxs)("span",{className:"text-neutral-300",children:[e,"/10"]})},{key:"qualita_fornitura",label:"Qualit\xe0 Fornitura",width:140,sortable:!0,format:e=>(0,l.jsxs)("span",{className:"text-neutral-300",children:[e,"/10"]})}],defaultVisibleColumns:["codice_fornitore","ragione_sociale","localita","tipo_fornitura","valutazione_complessiva","attivo"]},n=e=>{e(s),e(r)}},9841:(e,t,a)=>{a.d(t,{A:()=>v});var l=a(5155),s=a(2115),r=a(381),n=a(9946);let i=(0,n.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),o=(0,n.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),c=(0,n.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),d=(0,n.A)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),x=(0,n.A)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),u=(0,n.A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),m=(0,n.A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),h=(0,n.A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),f=(0,n.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),b=(0,n.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var p=a(2560);let v=e=>{var t;let{isOpen:a,onClose:n,tableId:v,title:g}=e,j=(0,p.cG)(),y=(0,p.K2)(v),N=(0,s.useRef)(null),[C,k]=(0,s.useState)([]),[w,S]=(0,s.useState)(null);if(s.useEffect(()=>{a&&k(y.visibleColumns)},[a,y.visibleColumns]),s.useEffect(()=>{0===C.length&&y.visibleColumns.length>0&&k(y.visibleColumns)},[y.visibleColumns,C.length]),!a)return null;let M=e=>{k(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},A=(e,t)=>{let a=[...C],[l]=a.splice(e,1);a.splice(t,0,l),k(a)},z=e=>{e>0&&A(e,e-1)},F=e=>{e<C.length-1&&A(e,e+1)},_=(e,t)=>{S(t),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.toString())},E=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},B=(e,t)=>{e.preventDefault(),e.stopPropagation();let a=parseInt(e.dataTransfer.getData("text/plain"));a===t||isNaN(a)||A(a,t),S(null)},D=()=>{S(null)},T=g||(null==(t=j.getSchema(v))?void 0:t.id)||v;return(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-neutral-800 rounded-lg border border-neutral-600 w-full max-w-5xl max-h-[85vh] flex flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-neutral-600",children:[(0,l.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center gap-3",children:[(0,l.jsx)(r.A,{className:"w-6 h-6 text-[#3B82F6]"}),"Configurazione Tabella - ",T]}),(0,l.jsx)("button",{onClick:n,className:"text-neutral-400 hover:text-white transition-colors",children:(0,l.jsx)(i,{className:"w-6 h-6"})})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"text-lg font-semibold text-white mb-4",children:["Colonne Disponibili (",y.allColumns.length,")"]}),(0,l.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:y.allColumns.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-neutral-700/40 rounded-lg border border-neutral-600/40 hover:bg-neutral-700/60 transition-colors",children:[(0,l.jsx)("button",{onClick:()=>M(e.key),className:"focus:outline-none",title:C.includes(e.key)?"Nascondi colonna":"Mostra colonna",children:C.includes(e.key)?(0,l.jsx)(o,{className:"w-5 h-5 text-green-400 hover:text-green-300 transition-colors"}):(0,l.jsx)(c,{className:"w-5 h-5 text-neutral-500 hover:text-neutral-300 transition-colors"})}),(0,l.jsxs)("div",{className:"flex-1 ml-3",children:[(0,l.jsx)("span",{className:"text-neutral-200 font-medium",children:e.label}),(0,l.jsxs)("div",{className:"text-xs text-neutral-400 mt-1",children:[e.key," â€¢"," ",e.sortable?"Ordinabile":"Non ordinabile"]})]})]},e.key))})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"text-lg font-semibold text-white mb-4",children:["Ordine Colonne (",C.length,")"]}),(0,l.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[C.map((e,t)=>{let a=y.allColumns.find(t=>t.key===e);if(!a)return null;let s=w===t;return(0,l.jsxs)("div",{draggable:!0,onDragStart:e=>_(e,t),onDragOver:E,onDrop:e=>B(e,t),onDragEnd:D,className:"flex items-center space-x-3 p-4 bg-neutral-700/60 rounded-lg border cursor-move transition-all ".concat(s?"opacity-50 border-[#3B82F6] bg-[#3B82F6]/20":"border-neutral-600/60 hover:border-[#3B82F6]/50"),children:[(0,l.jsx)(d,{className:"w-5 h-5 text-neutral-400"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-neutral-200 font-medium",children:a.label}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("button",{onClick:()=>z(t),disabled:0===t,className:"p-1 text-neutral-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Sposta su",children:(0,l.jsx)(x,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:()=>F(t),disabled:t===C.length-1,className:"p-1 text-neutral-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Sposta gi\xf9",children:(0,l.jsx)(u,{className:"w-4 h-4"})})]})]}),(0,l.jsxs)("div",{className:"text-xs text-neutral-400 mt-1",children:["Posizione #",t+1]})]})]},e)}),0===C.length&&(0,l.jsxs)("div",{className:"text-center py-8 text-neutral-500",children:[(0,l.jsx)("div",{className:"text-sm",children:"Nessuna colonna selezionata"}),(0,l.jsx)("div",{className:"text-xs mt-1",children:"Seleziona almeno una colonna dalla lista di sinistra"})]})]})]})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-neutral-600 bg-neutral-800",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("button",{onClick:()=>{k(y.defaultColumns)},className:"flex items-center gap-2 px-4 py-2 bg-neutral-700 hover:bg-neutral-600 text-neutral-200 rounded-lg transition-colors",children:[(0,l.jsx)(m,{className:"w-4 h-4"}),"Reset Default"]}),(0,l.jsxs)("div",{className:"border-l border-neutral-600 pl-4 flex items-center space-x-2",children:[(0,l.jsxs)("button",{onClick:()=>{j.exportConfig()},className:"flex items-center gap-2 px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm",children:[(0,l.jsx)(h,{className:"w-4 h-4"}),"Export Globale"]}),(0,l.jsxs)("button",{onClick:()=>{var e;null==(e=N.current)||e.click()},className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm",children:[(0,l.jsx)(f,{className:"w-4 h-4"}),"Import Globale"]}),(0,l.jsx)("input",{ref:N,type:"file",accept:".json",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(!a)return;let l=new FileReader;l.onload=e=>{try{var t;let a=JSON.parse(null==(t=e.target)?void 0:t.result);j.importConfig(a)}catch(e){alert("Errore nel caricamento del file di configurazione")}},l.readAsText(a),e.target.value=""},className:"hidden"})]}),(0,l.jsxs)("div",{className:"text-sm text-neutral-400",children:[C.length," colonne selezionate"]})]}),(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)("button",{onClick:n,className:"px-6 py-2 bg-neutral-700 hover:bg-neutral-600 text-neutral-200 rounded-lg transition-colors",children:"Annulla"}),(0,l.jsxs)("button",{onClick:()=>{y.updateConfig({visibleColumns:C}),n()},className:"flex items-center gap-2 px-6 py-2 bg-[#3B82F6] hover:bg-[#3B82F6]/80 text-white rounded-lg transition-colors",children:[(0,l.jsx)(b,{className:"w-4 h-4"}),"Applica Configurazione"]})]})]})]})})}}}]);