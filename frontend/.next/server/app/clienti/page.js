(()=>{var e={};e.id=947,e.ids=[947],e.modules={250:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var n=r(5239),l=r(8088),s=r(8170),i=r.n(s),a=r(893),o={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);r.d(t,o);let d={children:["",{children:["clienti",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5844)),"/home/mauri/gestionale-fullstack/frontend/app/clienti/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,8014)),"/home/mauri/gestionale-fullstack/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/mauri/gestionale-fullstack/frontend/app/clienti/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/clienti/page",pathname:"/clienti",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},738:(e,t,r)=>{Promise.resolve().then(r.bind(r,9122))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},5844:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/mauri/gestionale-fullstack/frontend/app/clienti/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/mauri/gestionale-fullstack/frontend/app/clienti/page.tsx","default")},6458:(e,t,r)=>{Promise.resolve().then(r.bind(r,5844))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9122:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var n=r(687),l=r(1128),s=r(1048);r(5581);var i=r(6705),a=r(3210),o=r(963),d=r(4027),c=r(7175),u=r(3238);function x(){let{registerSchema:e}=(0,s.cG)(),t=(0,s.K2)("clienti"),[r,x]=(0,a.useState)(""),[p,h]=(0,a.useState)(!1),[m,v]=(0,a.useState)(null),[f,g]=(0,a.useState)(!1),[b,j]=(0,a.useState)([]),[C,N]=(0,a.useState)(!0),[y,k]=(0,a.useState)(null),[w,P]=(0,a.useState)(""),[A,E]=(0,a.useState)(""),S=()=>{N(!0),(0,u.L2)().then(e=>{j(e),k(null),N(!1)}).catch(()=>{j([]),k("Errore di rete o di backend"),N(!1)})},z=b.filter(e=>{let t=e.RagioneSocialeC&&e.RagioneSocialeC.toLowerCase().includes(r.toLowerCase())||e.IdCliente&&e.IdCliente.toLowerCase().includes(r.toLowerCase()),n=!w||"attivo"===w&&!0===e.AttivoC||"non_attivo"===w&&!1===e.AttivoC,l=!A||e.EffettivoPotenziale===A;return t&&n&&l}),_=t.sortData(z),B=t.getVisibleColumnsWithConfig(),F=(0,a.useCallback)(e=>{t.handleSort(e)},[t]),L=e=>{v(e),h(!0)},R=async e=>{try{if(m){if(!m.IdCliente)return void alert("Errore: ID cliente mancante!");await (0,u.re)(m.IdCliente,e),alert(`Cliente "${e.RagioneSocialeC}" modificato con successo!`)}else await (0,u.SW)(e),alert(`Cliente "${e.RagioneSocialeC}" creato con successo!`);h(!1),v(null),S()}catch{alert("Errore durante il salvataggio")}},q=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-neutral-700 hover:bg-neutral-600 text-neutral-200 rounded-lg text-sm font-medium transition-colors",children:[(0,n.jsx)(d.A,{className:"w-4 h-4"}),"Configura Tabella"]}),(0,n.jsxs)("button",{onClick:()=>{v(null),h(!0)},className:"bg-[#3B82F6] hover:bg-[#3B82F6]/80 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2",children:[(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,n.jsx)("span",{children:"Nuovo Cliente"})]})]}),G=b.filter(e=>!0===e.AttivoC).length,I=b.filter(e=>"Effettivo"===e.EffettivoPotenziale).length,M=b.filter(e=>"Potenziale"===e.EffettivoPotenziale).length;return y?(0,n.jsx)(i.A,{pageTitle:"Gestione Clienti",pageDescription:"Anagrafica e gestione clienti aziendali",headerActions:q,children:(0,n.jsxs)("div",{className:"text-center py-10 text-red-400",children:["Errore: ",y]})}):(0,n.jsxs)(i.A,{pageTitle:"Gestione Clienti",pageDescription:"Anagrafica e gestione clienti aziendali",headerActions:q,children:[(0,n.jsxs)("div",{className:"mb-6 flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("svg",{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,n.jsx)("input",{type:"text",placeholder:"Cerca per ragione sociale, codice cliente, referente...",value:r,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-neutral-700/60 border border-neutral-600/60 rounded-lg text-neutral-100 placeholder-neutral-400 focus:outline-none focus:border-[#3B82F6] transition-colors"})]})}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)("select",{value:w,onChange:e=>P(e.target.value),className:"px-3 py-2 bg-neutral-700/60 border border-neutral-600/60 rounded-lg text-neutral-100 text-sm focus:outline-none focus:border-[#3B82F6] transition-colors",children:[(0,n.jsx)("option",{value:"",children:"Tutti i clienti"}),(0,n.jsx)("option",{value:"attivo",children:"Solo attivi"}),(0,n.jsx)("option",{value:"non_attivo",children:"Solo non attivi"})]}),(0,n.jsxs)("select",{value:A,onChange:e=>E(e.target.value),className:"px-3 py-2 bg-neutral-700/60 border border-neutral-600/60 rounded-lg text-neutral-100 text-sm focus:outline-none focus:border-[#3B82F6] transition-colors",children:[(0,n.jsx)("option",{value:"",children:"Tutte le categorie"}),(0,n.jsx)("option",{value:"Effettivo",children:"Effettivo"}),(0,n.jsx)("option",{value:"Potenziale",children:"Potenziale"}),(0,n.jsx)("option",{value:"Ex cliente",children:"Ex cliente"})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,n.jsxs)("div",{className:"bg-neutral-700/60 border border-neutral-600/60 rounded-lg p-4",children:[(0,n.jsx)("div",{className:"text-2xl font-light text-neutral-100",children:b.length}),(0,n.jsx)("div",{className:"text-sm text-neutral-400",children:"Totale Clienti"})]}),(0,n.jsxs)("div",{className:"bg-neutral-700/60 border border-neutral-600/60 rounded-lg p-4",children:[(0,n.jsx)("div",{className:"text-2xl font-light text-green-400",children:G}),(0,n.jsx)("div",{className:"text-sm text-neutral-400",children:"Clienti Attivi"})]}),(0,n.jsxs)("div",{className:"bg-neutral-700/60 border border-neutral-600/60 rounded-lg p-4",children:[(0,n.jsx)("div",{className:"text-2xl font-light text-[#3B82F6]",children:I}),(0,n.jsx)("div",{className:"text-sm text-neutral-400",children:"Effettivi"})]}),(0,n.jsxs)("div",{className:"bg-neutral-700/60 border border-neutral-600/60 rounded-lg p-4",children:[(0,n.jsx)("div",{className:"text-2xl font-light text-amber-400",children:M}),(0,n.jsx)("div",{className:"text-sm text-neutral-400",children:"Potenziali"})]})]}),C?(0,n.jsx)("div",{className:"text-center py-10 text-neutral-400",children:"Caricamento clienti..."}):(0,n.jsx)("div",{className:"bg-neutral-700/40 border border-neutral-600/40 rounded-lg overflow-hidden",children:(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{className:"bg-neutral-700/60 border-b border-neutral-600/60",children:(0,n.jsxs)("tr",{children:[B.map(e=>(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-300 uppercase tracking-wider cursor-pointer hover:bg-neutral-600/40 transition-colors select-none",style:{width:e.width},onClick:()=>e.sortable&&F(e.key),children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{children:e.label}),e.sortable&&(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("svg",{className:`w-3 h-3 ${t.sortConfig?.key===e.key&&"asc"===t.sortConfig.direction?"text-[#3B82F6]":"text-neutral-500"}`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}),(0,n.jsx)("svg",{className:`w-3 h-3 -mt-1 ${t.sortConfig?.key===e.key&&"desc"===t.sortConfig.direction?"text-[#3B82F6]":"text-neutral-500"}`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})},e.key)),(0,n.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-300 uppercase tracking-wider w-20",children:"Azioni"})]})}),(0,n.jsx)("tbody",{className:"divide-y divide-neutral-600/40",children:_.map(e=>(0,n.jsxs)("tr",{className:"hover:bg-neutral-700/30 transition-colors",children:[B.map(t=>(0,n.jsx)("td",{className:"px-4 py-3 text-sm",style:{width:t.width},children:t.format?t.format(e[t.key],e):e[t.key]},t.key)),(0,n.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("button",{onClick:()=>L(e),className:"text-neutral-400 hover:text-[#3B82F6] transition-colors",title:"Modifica cliente",children:(0,n.jsx)(c.A,{className:"w-4 h-4"})})})})]},e.IdCliente))})]})})}),(0,n.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"text-sm text-neutral-400",children:["Visualizzati ",_.length," di ",b.length," clienti",t.isClient&&t.sortConfig&&(0,n.jsxs)("span",{className:"ml-2 text-[#3B82F6]",children:["• Ordinato per"," ",B.find(e=>e.key===t.sortConfig.key)?.label," ","(","asc"===t.sortConfig.direction?"crescente":"decrescente",")"]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("button",{className:"px-3 py-1 bg-neutral-700/60 border border-neutral-600/60 rounded text-sm text-neutral-300 hover:bg-neutral-700 transition-colors",children:"Precedente"}),(0,n.jsx)("button",{className:"px-3 py-1 bg-[#3B82F6] text-white rounded text-sm",children:"1"}),(0,n.jsx)("button",{className:"px-3 py-1 bg-neutral-700/60 border border-neutral-600/60 rounded text-sm text-neutral-300 hover:bg-neutral-700 transition-colors",children:"2"}),(0,n.jsx)("button",{className:"px-3 py-1 bg-neutral-700/60 border border-neutral-600/60 rounded text-sm text-neutral-300 hover:bg-neutral-700 transition-colors",children:"Successivo"})]})]}),(0,n.jsx)(o.A,{isOpen:p,onClose:()=>{h(!1),v(null)},onSave:R,clienteEdit:m}),(0,n.jsx)(l.A,{isOpen:f,onClose:()=>g(!1),tableId:"clienti",title:"Clienti"})]})}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[447,919,658,715,336,217,758],()=>r(250));module.exports=n})();