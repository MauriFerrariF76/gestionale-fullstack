[Unit]
Description=Gestionale Development Environment
After=network.target postgresql.service
Wants=postgresql.service

[Service]
Type=oneshot
User=mauri
Group=mauri
WorkingDirectory=/home/mauri/gestionale-fullstack
ExecStart=/home/mauri/gestionale-fullstack/scripts/start-sviluppo.sh
RemainAfterExit=yes
StandardOutput=journal
StandardError=journal
Environment=NODE_ENV=development

# Timeout e gestione robusta
TimeoutStartSec=120
TimeoutStopSec=30
KillMode=mixed
KillSignal=SIGTERM

# Sicurezza (modificata per permettere sudo)
PrivateTmp=true
ReadWritePaths=/home/mauri/gestionale-fullstack

# Health check e monitoraggio
WatchdogSec=30

[Install]
WantedBy=multi-user.target
